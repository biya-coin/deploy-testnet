# 这是 Jinja2 模板文件，由 Ansible 根据变量生成实际的 app.toml
# 验证者节点（共识节点）配置 - 最小化对外服务

###############################################################################
###                           Base Configuration                            ###
###############################################################################

minimum-gas-prices = "160000000inj"
pruning = "default"
pruning-keep-recent = "0"
pruning-interval = "0"
halt-height = 0
halt-time = 0
min-retain-blocks = 0
inter-block-cache = true
index-events = []
iavl-cache-size = 781250
iavl-disable-fastnode = false

###############################################################################
###                         Telemetry Configuration                         ###
###############################################################################

[telemetry]
service-name = ""
enabled = false
enable-hostname = false
enable-hostname-label = false
enable-service-label = false
prometheus-retention-time = 0
global-labels = []

###############################################################################
###                           API Configuration                             ###
###############################################################################

[api]

# 验证者节点：关闭 API 服务
enable = false
swagger = false
address = "tcp://127.0.0.1:1317"
max-open-connections = 1000
rpc-read-timeout = 10
rpc-write-timeout = 0
rpc-max-body-bytes = 1000000
enabled-unsafe-cors = false

###############################################################################
###                           Rosetta Configuration                         ###
###############################################################################

[rosetta]

enable = false
address = ":8080"
blockchain = "app"
network = "network"
retries = 3
offline = false
enable-fee-suggestion = false
gas-to-suggest = 200000
denom-to-suggest = "inj"

###############################################################################
###                           gRPC Configuration                            ###
###############################################################################

[grpc]

# 验证者节点：gRPC 仅监听本地
enable = true
address = "{{ grpc_address | default('127.0.0.1:9900') }}"
max-recv-msg-size = 10485760
max-send-msg-size = 2147483647

###############################################################################
###                        gRPC Web Configuration                           ###
###############################################################################

[grpc-web]

# 验证者节点：不启用 gRPC Web
enable = false
address = "127.0.0.1:9091"
enable-unsafe-cors = false

###############################################################################
###                        State Sync Configuration                         ###
###############################################################################

[state-sync]

snapshot-interval = 0
snapshot-keep-recent = 2

###############################################################################
###                             Store Configuration                          ###
###############################################################################

[store]
streamers = []

###############################################################################
###                             Streamers Configuration                      ###
###############################################################################

[streamers]

[streamers.file]
keys = ["*"]
write_dir = ""
prefix = ""
output-metadata = true
stop-node-on-error = true
fsync = false

###############################################################################
###                             Mempool                                      ###
###############################################################################

[mempool]
max-txs = 5000

###############################################################################
###                         JSON-RPC Configuration                          ###
###############################################################################

[json-rpc]

# 验证者节点：不启用 JSON-RPC（EVM）
enable = false
address = "127.0.0.1:8545"
ws-address = "127.0.0.1:8546"
api = "eth,net,web3"
gas-cap = 50000000
evm-timeout = "5s"
txfee-cap = 1.0
filter-cap = 200
feehistory-cap = 100
logs-cap = 10000
block-range-cap = 10000
http-timeout = "30s"
http-idle-timeout = "2m0s"
allow-unprotected-txs = false
max-open-connections = 0
enable-indexer = false
metrics-address = "127.0.0.1:6065"

[json-rpc.evm]
tracer = ""
max-debug-trace-block-txs = 200

[json-rpc.feehistory]
enable = false
max-block-count = 1024
default-block-count = 20

[json-rpc.txfee]
default-base-fee = "160000000"

###############################################################################
###                             TLS Configuration                            ###
###############################################################################

[tls]

certificate-path = ""
key-path = ""

